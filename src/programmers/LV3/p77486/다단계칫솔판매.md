https://school.programmers.co.kr/learn/courses/30/lessons/77486

### 문제 풀이 날짜
2025-11-17

### 문제 분석 요약
- 다단계 조직의 판매금액을 구하는 문제
- 판매원이 돈을 받는다 ->  10% 계산 -> 추천인에게 전달 -> 추천인의 추천인에게 전달
-

### 제약조건
- enroll의 길이는 1 이상 10,000 이하입니다
- referral의 길이는 enroll의 길이와 같습니다
- seller의 길이는 1 이상 100,000 이하입니다
- amount의 길이는 seller의 길이와 같습니다
- 칫솔 한 개를 판매하여 얻어지는 이익은 100 원
### 알고리즘 설계

문제의 핵심
- enroll의 순서가 보장되어 있고 추천인이 이미 주어져 있어서 HashMap 자료구조에 저장한다
- 판매가 발생했을 때 위로 올라가면서 분배하는 과정은 재귀로 한다
#### 입력
- 판매원의 이름을 담은 배열 enroll
- 판매원을 참여시킨 판매원 이름 배열 seller
- 판매원 이름을 나열한 배열 seller
- 판매 수량을 나열한 배열 amount
#### 연산
- seller[i]가 amount[i]개를 팔았을때
    - 총 이익 계산 (amount[i] * 100)
    - 현재 판매원부터 반복
        - 10%를 계산한다
        - 1원 미만이면 중단
        - 나머지는 현재 판매원이 가짐
        - 추천인으로 이동한다
        - center에 도달한 경우에 종료한다

#### 출력
- 판매원이 득한 이익금을 나열한 배열
### 시간 복잡도
- `O(N*M)`
    - N은 enroll의 길이, M은 seller의 길이
    - seller 별로 enroll을 탐색하기 때문에 `O(N*M)`

### 코드
```java  
import java.util.HashMap;

class Solution {
        public int[] solution(String[] enroll, String[] referral, String[] seller, int[] amount) {

        HashMap<String, String> parentMap = new HashMap<>(); // key : 판매원, value : 추천인
        for (int i = 0; i < enroll.length; i++) {
            parentMap.put(enroll[i], referral[i]);
        }

        HashMap<String, Integer> total = new HashMap<>(); // 판매자 수익 담을 맵

        for(int i = 0; i < seller.length; i++) {
            String curName = seller[i];
            int money = amount[i] * 100; // 판매자가 판매한 총 금액 갯수 * 100원

            while (money > 0 && !curName.equals("-")) { // 추천인이 있고 판매 금액이 있는 경우
                total.put(curName, total.getOrDefault(curName, 0) + money - (money / 10)); // 판매자별 판매 금액
                curName = parentMap.get(curName); // 판매자의 추천인 구하기
                money /= 10; // 10% 추천인에게 줄 금액 제외하고 계산
            }
        }

        int[] answer = new int[enroll.length];
        for (int i = 0; i < enroll.length; i++) {
            answer[i] = total.getOrDefault(enroll[i], 0);
        }
        return answer;
    }
}
```

### 알게된점
- 판매자-판매원간의 관계가 부모자식간의 관계이기 때문에 enroll을 key, referral을 value로 사용하는 HashMap을 통해 탐색 속도를 빠르게 할 수 있다
